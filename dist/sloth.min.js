!function(t,i,e){"use strict";function s(i,s){"undefined"!=typeof i&&(s=s||{},this.$element=i||t("[data-src]").first(),this.$preloader=s.$preloader||t(e.body),this.isInline="img"===this.$element[0].tagName.toLowerCase(),this.source=this.$element.attr("data-src"),this.isWidthInherited=!1,this.ratio=16/9,this.initialWidth=0,this.initialHeight=0,this.width=0,this.init().bind())}function n(t,i){s.call(this,t,i)}function o(t,i){s.call(this,t,i)}i.Sloth=s,s.prototype.init=function(){return this.parseOptions(),this.parseSource(),this.wrap(),this.preload(t.proxy(this.onLoad,this)),this},s.prototype.wrap=function(){},s.prototype.onLoad=function(){},s.prototype.reserveSpace=function(){var t=(this.$element.parent(),parseInt(this.$element.css("width"),10));t?(this.initialWidth=t,this.width=""!==this.$element.get(0).style.width?this.$element.get(0).style.width:this.initialWidth):(this.initialWidth=parseInt(this.$element.parent().css("width")),this.width=this.initialWidth,"none"!==this.$element.css("max-width")&&(this.width="")),this.initialHeight=this.initialWidth*(1/this.ratio)},s.prototype.preload=function(i){var e=t("<img />");e.hide().appendTo(this.$preloader).on("load",function(){i(e)}).attr("src",this.source)},s.prototype.parseSource=function(){this.source=this.$element.attr("data-src")},s.prototype.parseOptions=function(){if(this.$element.attr("data-ratio")){var t=this.$element.attr("data-ratio").split(":"),i=parseInt(t[0],10),e=t[1]?parseInt(t[1],10):1;this.ratio=i/e}},s.prototype.bind=function(){return this},s.prototype.reset=function(){return this},s.prototype.unbind=function(){return this},s.load=function(i){t(i).each(function(){"img"===t(this)[0].tagName.toLowerCase()?new o(t(this)):new n(t(this))})},i.BackgroundSloth=n,n.prototype=new s,n.prototype.constructor=s,n.prototype.wrap=function(){var i=t('<div class="sloth__background" />');this.$element.addClass("sloth is-loading"),"static"===this.$element.css("position")&&this.$element.css("position","relative"),this.$element.html().length>0&&this.$element.wrapInner(t('<div class="sloth__content" />').css({position:"relative","z-index":2})),i.css({position:"absolute",top:0,left:0,right:0,bottom:0,"z-index":1,background:this.$element.css("background")}).hide().appendTo(this.$element)},n.prototype.onLoad=function(t){var i=this.$element;i.find(".sloth__background").css("background-image","url("+t.attr("src")+")").fadeIn(880,function(){i.removeClass("is-loading")})},i.InlineSloth=o,o.prototype=new s,o.prototype.constructor=s,o.prototype.wrap=function(){var i=t('<span class="sloth is-loading" />');this.reserveSpace(),i.css({width:this.initialWidth,height:this.initialHeight,display:"inline-block","max-width":this.$element.css("max-width"),"font-size":0}),this.$element.css({display:"block",width:"100%",position:"relative","z-index":2}),this.$element.wrap(i)},o.prototype.onLoad=function(t){var i=this.$element.closest(".sloth");i.css("width",this.width),this.$element.hide().attr("src",t.attr("src")).fadeIn(880,function(){i.removeClass("is-loading")}),i.animate({height:this.initialWidth/t.width()*t.height()},220,function(){i.css("height","")})}}(jQuery,window,document);