!function(t,i,e){"use strict";function s(i){"undefined"!=typeof i&&(s.settings=s.settings||{versions:{220:"small",640:"medium",1280:"large"},retina:"",ratio:16/9},this.$element=i||t("[data-src]").first(),this.isInline="img"===this.$element[0].tagName.toLowerCase(),this.source=this.$element.attr("data-src"),this.isWidthInherited=!1,this.ratio=s.settings.ratio,this.initialWidth=0,this.initialHeight=0,this.width=0,this.init().bind())}function n(t,i){s.call(this,t,i)}function o(t,i){s.call(this,t,i)}i.Sloth=s,s.prototype.init=function(){return this.parseOptions(),this.calculateDimensions(),this.parseSource(),this.wrap(),this.preload(t.proxy(this.onLoad,this)),this},s.prototype.wrap=function(){},s.prototype.onLoad=function(){},s.prototype.onError=function(){},s.prototype.calculateDimensions=function(){this.initialWidth=parseInt(this.$element.css("width"),10),this.width=""!==this.$element.get(0).style.width?this.$element.get(0).style.width:this.initialWidth,this.initialHeight=this.initialWidth*(1/this.ratio)},s.prototype.preload=function(i){var s=t("<img />");s.hide().appendTo(t(e.body)).on("load",function(){i(s),s.remove()}).error(t.proxy(this.onError,this)).attr("src",this.source)},s.prototype.parseSource=function(){var t=i.devicePixelRatio||i.webkitDevicePixelRatio||i.mozDevicePixelRatio,e="";t="undefined"==typeof t?1:parseFloat(t);for(var n in s.settings.versions)if(s.settings.versions.hasOwnProperty(n)){var o=s.settings.versions[n];if(!(this.initialWidth>parseInt(n,10)))break;e=o}this.source=this.$element.attr(this.$element.attr("data-src-"+e)?"data-src-"+e:"data-src"),t>1&&s.settings.retina&&(this.source+=s.settings.retina)},s.prototype.parseOptions=function(){if(this.$element.attr("data-ratio")){var t=this.$element.attr("data-ratio").split(":"),i=parseInt(t[0],10),e=t[1]?parseInt(t[1],10):1;this.ratio=i/e}},s.prototype.bind=function(){return this},s.prototype.reset=function(){return this},s.prototype.unbind=function(){return this},s.load=function(i){t(i).each(function(){"img"===t(this)[0].tagName.toLowerCase()?new o(t(this)):new n(t(this))})},i.BackgroundSloth=n,n.prototype=new s,n.prototype.constructor=s,n.prototype.wrap=function(){var i=t('<div class="sloth__background" />');this.$element.addClass("sloth is-loading"),("static"===this.$element.css("position")||"relative"===this.$element.css("position"))&&this.$element.css("position","relative"),this.$element.html().length>0&&this.$element.wrapInner(t('<div class="sloth__content" />').css({position:"relative","z-index":2})),i.css({position:"absolute",top:0,left:0,right:0,bottom:0,"z-index":1,background:this.$element.css("background")}).hide().appendTo(this.$element)},n.prototype.onLoad=function(t){var i=this.$element;i.find(".sloth__background").css("background-image","url("+t.attr("src")+")").fadeIn(880,function(){i.removeClass("is-loading")})},n.prototype.onError=function(){this.$element.removeClass("is-loading").addClass("is-errored");try{console.error("Could not load",this.source)}catch(t){}},i.InlineSloth=o,o.prototype=new s,o.prototype.constructor=s,o.prototype.calculateDimensions=function(){var t=(this.$element.parent(),parseInt(this.$element.css("width"),10));t?(this.initialWidth=t,this.width=""!==this.$element.get(0).style.width?this.$element.get(0).style.width:this.initialWidth):(this.initialWidth=parseInt(this.$element.parent().css("width")),this.width=this.initialWidth,"none"!==this.$element.css("max-width")&&(this.width="")),this.initialHeight=this.initialWidth*(1/this.ratio)},o.prototype.wrap=function(){var i=t('<span class="sloth is-loading" />');i.css({width:this.initialWidth,height:this.initialHeight,display:"inline-block","max-width":this.$element.css("max-width"),"font-size":0}),this.$element.css({display:"block",width:"100%",position:"relative","z-index":2}),this.$element.wrap(i)},o.prototype.onLoad=function(t){var i=this.$element.closest(".sloth");i.css("width",this.width),this.$element.hide().attr("src",t.attr("src")).fadeIn(880,function(){i.removeClass("is-loading")}),i.animate({height:this.initialWidth/t.width()*t.height()},220,function(){i.css("height","")})},o.prototype.onError=function(){var t=this.$element.closest(".sloth");t.removeClass("is-loading").addClass("is-errored");try{console.error("Could not load",this.source)}catch(i){}}}(jQuery,window,document);